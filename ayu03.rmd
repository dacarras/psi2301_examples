---
title: "PSI2301: Metodos de investigación cuantitativa"
subtitle: "Ayudantía 3"
output:
  html_document:
    toc: true
    toc_float: true

---


La ayudantía de hoy revisaremos el trabajo (Quaranta, 2019), el cuál describe perfiles de concepciones democráticas. La investigación distingue tres grupos:

- **complex**: son aquellos estudiantes que consideran constitutivos de los sistemas democráticos, un conjunto complejo de características. Entre ellas se encuentran las elecciones de autoridades políticas, la igualdad ante la ley, y el ejericicio de protesta frente a leyes injustas. Además, consideran que la concentración de medios de comunicación, el nepotismo en el gobierno, y la influencia del ejecutivo sobre los tribunales de justicia como amenazas claras a los sistemas democráticos.

- **minimalist**: son aquellos estudiantes que consideran constitutivos de los sistemas democráticos, un conjunto minimalista de características. Esto incluye a las elecciones de autoridades políticas, la igualdad ante la ley, y el ejericicio de protesta frente a leyes injustas. Sin embargo, este perfil de estudiantes, es insensible a la concentración de medios, el nepotismo, y la influencia del ejecutivo sobre el poder judicial.

- **limited**: son aquellos estudiantes que no distinguen de forma adecuada las características centrales de los sistemas democráticos.

Para conocer más sobre estos características de los estudiantes que pertenecen a cada una de estas categorías utilizaremos los resultados encuesta de ICCS. Esta encuesta fue creada con el fin de poder investigar las formas en que las/os jóvenes están preparados para adoptar sus roles como ciudades en un mundo en el cuál la democracia y la participación se encuentran en constante cambio. La base de datos `dem_16` es una submuestra de la anterior encuesta con 2500 casos de la medición del año 2016. 

Esta base de datos cuenta con las siguientes variables:

|variable|descripción|
|:--|:--|
|id_i|id único del caso|
|ctry|nombre del país|
|sex|sexo del estudiante|
|age|edad del estudiante en años|
|dem|perfil de concepciones de las democracia (1 = minimalista, 2 = complejo, 3 = limitado)|
|dem_group|perfil de concepciones de las democracia (en texto)|
|aut|creencias antidemocráticas |
|civ|conocimiento cívico |
|ses|nivel socioecónomico |
|edu|educación de los padres (1 = educación universitaria, 0 = otro nivel educativo)|
|level|niveles de conocimiento cívico (numérico) (3 = alta sofisticación, 2 = medio, 1 = bajo, 0 = muy bajo)|
|level_lab|niveles de conocimiento cívico (Level 3 = alta sofisticación, Level 2 = medio, Level 1 = bajo, Level 0 = muy bajo)|


A partir de lo anterior, procederemos a realizar los siguientes ejercicios:

# Análisis descriptivo

## Pregunta 1
Cargue la base de datos de la encuesta y verifique si el proceso de lectura fue realizado sin problemas. Para esto, considere e indique la instalación o actualización de las librerías correspondientes para la realización de este ejercicio.

```
# Estas instalaciones solo tendrán que se efectuadas la primera vez
install.packages("tidyverse")
install.packages("remotes")
install.packages("skimr")
remotes::install_github("dacarras/psi2301")

# Actualización de librerías
# la librería del curso se está constantemente actualizando por lo que esta 
# deberá actualizarse al comienzo de cada semana
# esta es la única librería que requerirá este proceso

remotes::install_github("dacarras/psi2301", force =TRUE)


# Ahora se procede a la lectura de la base de datos

data(psi2301::dem16)


# revisión

dplyr::glimpse(dem_16)


>Nota de Ayuda: Para esta sesión se utilizará las librerías de `tidyverse`, `skimr` en conjunto con la librería del curso. Recuerde cargar sus librerías antes de comenzar. 
library(tidyverse)
library(skimr)
```

## Pregunta 2
La creación de los perfiles de concepciones democráticas corresponde a una categorización del puntaje de conocimiento cívico (variable `civ`) obtenido por los estudiantes que contestan la escuesta. Por lo mismo, el primer paso de esta ayudantía corresponderá a analizar en profundidad esta variable. Reporte a continuación los estadísticos de orden o posición de la variable conocimiento cívico (mediana, mínimo, máximo, cuartiles).


```{r}
# mínimo
min(dem_16$civ)
# máximo
max(dem_16$civ)
# cuartiles
fivenum(dem_16$civ)
# en orden aparecen mínimo (percentil 0), percentil 25, mediana (percentil 50), percentil 75 y máximo.
```

## Pregunta 3
A partir de la información obtenida anteriormente, ¿Qué es posible identificar a partir de estos elementos?, ¿Cuál es el menor puntaje en conocimiento cívico obtenido por los estudiantes de ésta sub-muestra?

## Pregunta 4
Utilizando la variable conocimiento cívico, genere y reporte los estadísticos descriptivos (media, mediana y desviación estándar)

```{r}

# solo civ
mean(dem_16$civ)
sd(dem_16$civ)
median(dem_16$civ)
```

## Pregunta 5
A partir de la información obtenida anteriormente, ¿Qué es posible identificar a partir de estos elementos? ¿Cómo diríamos que se distribuye el conocimiento cívico de los estudiantes? 

## Pregunta 6
Utilizando la función `describe` de la librería `psych` genere una tabla de datos descriptivos del resto de las variables contenidas en la base de datos.


```{r}
# el resto

# al existir variables que no son númericas, el argumento omit permite que el programa las evita
# y no tenga problemas para correrlas
# el argumento quant nos permite obtener los percentiles que queramos
psych::describe(dem_16, omit=TRUE, quant = c(.25,.75))
```

## Pregunta 7
Una vez caracterizada la variable con la que se generaron las categorías (variable `civ`) procederemos a revisar la variable niveles (variable `level`). Para esto genere una tabla de frencuencia y presente los resultados obtenidos en términos de frecuencia y porcentaje.

```{r}
table(dem_16$level)
prop.table(table(dem_16$level))
# para obtener números más pequeños
round(prop.table(table(dem_16$level)),2)
# para verlo en términos de porcentajes
round(prop.table(table(dem_16$level)),2)*100

```

## Pregunta 8
Describa los resultados obtenidos. ¿Cuál es el porcentaje de estudiantes que tienen los niveles más bajos de conocimiento cívico ? y cuál es el porcentaje de quienes tienen mayores niveles de conocimiento cívico?

## Pregunta 9
Genere una tabla cruzada o de contingencia con las categorías de conocimiento cívico (variable `level`) y los países participantes de la submuestra (variable `ctry`).

```{r}
table(dem_16$level,cut(dem_16$civ,3))

# tabla de proporciones
tab0 = prop.table(table(dem_16$ctry,dem_16$level))
# tabla redondeada 2 dígitos

tab1 = prop.table(table(dem_16$ctry,dem_16$level))
round(tab1,2)
```

## Pregunta 10
¿Podemos afirmar que existe una distribución homogénea entre los países? ¿Qué países presentan mayores proporciones de estudiantes con categorías de logro más altas?

# Visualización de datos

## Pregunta 11
Considerando los resultados, presente los siguientes resultados utilizando gráficos.


### a. Histograma 
Histograma de el puntaje de conocimiento cívico

```{r}
# activamos la librería ggplot2
library(ggplot2)

dem_16 %>%
ggplot(.,
	aes(x = civ))+
	geom_histogram(
      binwidth=5) +
	labs(
      title="Histograma de conocimiento cívico",
      x="Conocimiento cívico",
      y ="Frecuencia")
```
Interprete los resultados, ¿Cómo se distribuye el conocimiento cívico de los estudiantes en la sub-muestra analizada? 

### c. Gráfico de barras
Gráfico de barras (barplot) de categorías de conocimiento cívico

```{r}

grafb = as.data.frame(round(prop.table(table(dem_16$level)),2))
colnames(grafb) = c("Cat","Porcent")

grafb %>%
ggplot(.,
	aes(
      x    = Cat,
      y    = Porcent,
      )
    ) +
  geom_bar(stat = "identity") +
  scale_fill_brewer(palette = "Set3") +
  labs(
    x= "Niveles de Conocimiento Cívico",
    y= "Porcentajes",
    title = "Niveles de Conocimiento Cívico") +
  ylim(0,1) +
  theme_classic()  
```
Interprete los resultados, ¿qué porcentaje de los estudiantes pertenece a cada grupo de estos distintos niveles de conocimiento cívico? 

### e. Dispersograma
Dispersograma entre conocimiento cívico y creencias autoritarias.

```{r}
dem_16 %>%
ggplot(
  aes(
    x = civ,
    y = aut)
  ) +
geom_point(
  alpha = 0.2,
  size  = 2,
  color = "grey30") +
labs(
  title = "Conocimiento cívico vs Creencias autoritarias, según Concepto de democracia",
      y = "Creencias autoritarias",
      x = "Conocimiento Cívico") +
xlim(200,800) +
ylim(20,80)
```

Interprete los resultados, ¿se observa algún tipo de relación entre los niveles de conocimiento cívico y las creencias autoritarias de los estudiantes? 
